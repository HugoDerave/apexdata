<div class="event-top">
  <center><h2 class="event__top-subtitle"><%= @event.title %></h2></center>

  <div class="event__flags">
    <% sorted_event_signups = @event.event_signups.order(total_value: :desc) %>

    <% sorted_event_signups.limit(3).each_with_index do |event_signup, index| %>
      <%= render "flag_item", event_signup: event_signup, item_counter: index + 1 %>
    <% end %>
  </div>
</div>

<div class="list-content">
  <aside class="list-content__sidebar">
    <div class="item item--list">
      <div class="heading mt-0 mb-20">
        <h4 class="heading__title"><%= @event.title %></h4>
      </div>

      <br>

      <%= render "event_signups/form" %>
      <%= render "current_position" if current_user %>
    </div>

    <div class="item item--list">
      <div class="heading mt-0 mb-20">
        <h4 class="heading__title">Event ends in</h4>
      </div>

      <%= render "countdown", current_time: DateTime.now, end_time: @event.end_datetime %>

      <small>
        <span>Starts at: <%= @event.start_datetime.strftime("%e %B %Y, %T %Z") %></span><br>
        <span>Ends at: <%= @event.end_datetime.strftime("%e %B %Y, %T %Z") %></span>
      </small>
    </div>

    <div class="item item--list">
      <div class="heading mt-0 mb-20">
        <h4 class="heading__title">Rewards</h4>
      </div>

      <div class="rewards">
        <div class="rewards__badges">
          <div class="rewards__item svg-badge-gold">
            <div class="rewards__badge">
              <span class="rewards__position">1</span>
              <%= inline_svg("badges/levels/top3_event.svg") %>
            </div>

            <span class="rewards__item-description">
              First place
              <strong>&euro;50</strong>
            </span>
          </div>

          <div class="rewards__item svg-badge-silver">
            <div class="rewards__badge">
              <span class="rewards__position">2</span>
              <%= inline_svg("badges/levels/top3_event.svg") %>
            </div>

            <span class="rewards__item-description">
              Second place
              <strong>&euro;25</strong>
            </span>
          </div>

          <div class="rewards__item svg-badge-bronze">
            <div class="rewards__badge">
              <span class="rewards__position">3</span>
              <%= inline_svg("badges/levels/top3_event.svg") %>
            </div>

            <span class="rewards__item-description">
              Third place
              <strong>&euro;50</strong>
            </span>
          </div>
        </div>

        <small class="rewards__description">Rewards are distributed in the form of a PaySafeCard.</small>

        <div class="event__badges-wrapper">
          <div class="heading mt-0 mb-20">
            <h4 class="heading__title heading__title">Rewards</h4>
          </div>

          <p>
            <center><small>Badges are displayed on your profile.</small></center>
          </p>

          <div class="event__badges">
            <div class="event__badge">
              <%= image_tag "badges/events/pistol_kills01/winner.png" %>

              <center><small>First place badge</small></center>
            </div>

            <div class="event__badge">
              <%= image_tag "badges/events/pistol_kills01/leaderboard_badge.png" %>

              <center><small>Participation badge</small></center>
            </div>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <div class="list-content__content">
    <div class="item event__leaderboard">
      <% sorted_event_signups.each_with_index do |event_signup, index| %>
        <%= render "leaderboard_item", event_signup: event_signup, item_counter: index + 1 %>
      <% end %>
    </div>
  </div>
</div>
