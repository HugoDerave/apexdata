<% content_for :page_title, params[:user] + " | Profile" %>

<div data-role="profile-content">
  <div class="loading-indicator">
    <h2>Loading profile...</h2>
    <div class="loading-indicator__spinner"></div>
  </div>
</div>

<script>
  fetch("<%= get_api_response_path(params[:platform], params[:user]) %>", {
    method: "GET",
    headers: {
      "contentType": "application/json; charset=utf-8",
      "X-Requested-With": "XMLHttpRequest",
      "X-CSRF-Token": Rails.csrfToken()
    }
  }).then((response) => {
    response.text().then(content =>  {
      document.querySelector("[data-role='profile-content']").innerHTML = content
      createCharts()
    })
  })
</script>
